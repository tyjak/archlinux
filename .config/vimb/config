set hint-keys=hjkl
set hint-keys-same-length=on
set caret=true
set input-autohide=true
set download-path=~/downloads/
set webinspector=true
set history-max-items=100000
set closed-max-items=20
set editor-command=termite -e "vim %s"
set x-hint-command=:sh! stig -T add <C-R>;
nmap D :q<CR>
nmap H <C-O>
nmap L <C-I>
shortcut-default s
shortcut-add g=https://google.com/?q=$0
shortcut-add G=https://duckduckgo.com/?q=!gifl%20$0
shortcut-add !=https://duckduckgo.com/?q=!$0
shortcut-add l=https://search.lilo.org/?q=$0
shortcut-add s=https://www.startpage.com/do/dsearch?query=$0
shortcut-add a=https://duckduckgo.com/?q=!gifl%20ansible+$0
set strict-ssl=false

handler-add mailto=/home/david/share/bin/i3/gmail-mail %s
handler-add magnet=/bin/sh -c "stig -T add %s"
#handler-add ftp=termite -e wget %s -P ~/downloads
set home-page=./.config/vimb/historylast

nmap ,,m :sh sh -c 'youtube-dl -x -o "~/Music/_creamy/youtube/%(title)s.%(ext)s" $VIMB_URI'<CR>
nmap ,,v ::sh! sh -c 'xsel -o -s | xargs xdotool type i'<CR>
nmap ,,w :source ~/.config/vimb/config<CR>
nmap ,,o :sh /bin/sh -c "zathura \"~/downloads/\$(ls -1 -t ~/downloads/ | head -1)\""<CR>
nmap ,,D :sh /bin/sh -c "rm ~/downloads/\$(ls -1 -t ~/downloads/ | head -1)"<CR>
nmap ,,r ::e! tinytinyrss()<CR>
nmap ,;b :o ./.config/vimb/bookmark<CR>
nmap ,,; <ESC>::sh! ~/share/bin/passgenvimb<CR>
#imap ,,; <ESC>::sh! ~/share/bin/passgenvimb<CR>

nmap ,,i ::e! readlater()<CR>
nmap ,,f ::e! facebook()<CR>
nmap ,,t ::sh sh -c 'toot post "\$VIMB_TITLE \$VIMB_URI"'<CR>
nmap ,,a ::e! archive()<CR>::bma archive<CR>
nmap ,,b ::e! shaarli()<CR>::bma shaarli<CR>
nmap ,;a ::e! getArchive()<CR>
nmap ,,e :shell! termite -e "vim $VIMB_URI"<CR>

nmap ,ll :tabopen http://labonneformation.pole-emploi.local<CR>
nmap ;ll ::e! workUrlLbfToLocal()<CR>
nmap ,lr :tabopen https://labonneformation.beta.pole-emploi.fr<CR>
nmap ;lr ::e! workUrlLbfToRecette()<CR>
nmap ,lp :tabopen https://labonneformation.pole-emploi.fr<CR>
nmap ;lp ::e! workUrlLbfToProd()<CR>
nmap ,tl :tabopen http://trefle.pole-emploi.local/explorer/index.html<CR>
nmap ,tr :tabopen http://trefle.beta.pole-emploi.fr<CR>
nmap ,tp :tabopen http://trefle.pole-emploi.fr<CR>

nmap ,: :shell quickswitch -c Vimb -d "dmenu -l 20 -b -i -nb '#002b36' -nf '#839496' -sb '#859900' -fn 'MesloLGSDZ Nerd Font-10' -h 12"<CR>
nmap ;: :shell ~/share/bin/i3/dmenu-webnav<CR>
nmap <C-U> :sh! vimb_adblock<CR>

#set proxy=true
nmap ,,p :o http://config.privoxy.org/toggle<CR>

# Map page zoom in normal mode to keys commonly used across applications
# + (zoom in), - (zoom out), = (zoom reset)
nmap + zI
nmap - zO
nmap = zz

augroup bookmark
    autocmd LoadFinished file:///*/bookmark e! bookmarkFileToHtml();
    autocmd LoadFinished file:///*/bookmark.d/* e! bookmarkFileToHtml();
augroup end

augroup linkfile
    autocmd LoadStarted * shell sh -c "tail -100 ~/.config/vimb/history | uniq > ~/.config/vimb/historylast"
    autocmd LoadFinished file:///*/closed e! linkFileToHtml('Derniers onglets ouverts');
    autocmd LoadFinished file:///*/historylast e! linkFileToHtml('Historique <a href="file:///home/david/.config/vimb/history">(voir tout l\'historique)</a>');
    autocmd LoadFinished file:///*/history e! linkFileToHtml('Historique');
augroup end

# augroup download
#     autocmd DownloadFinished https://karagarga.in/down.php/* shell sh -c "echo $VIMB_URI > ~/test.vimb"
# augroup end

augroup trello
    autocmd LoadFinished https://trello.com/b/zqbyN4zA/lbf-financement-trefle?menu=filter&filter=member:davidfoucher2 e! trelloNumber();
augroup end

# NOTE: la connexion étant en erreur l'événement ne fonctionne pas
augroup work
    autocmd LoadStarted https://labonneformation.beta.pole-emploi.fr/* e! workUrlLbFixRecette();
augroup end

# GUI color settings
# Color scheme: Base16 Eighties (https://github.com/chriskempson/base16)
set completion-css=color:#839496;background-color:#002b36;font:10pt DejaVu Sans Mono;
set completion-hover-css=color:#839496;background-color:#586e75;font:10pt DejaVu Sans Mono;
set completion-selected-css=color:#fdf6e3;background-color:#b58900;font:10pt DejaVu Sans Mono;
set input-css=color:#839496;background-color:#002b36;font:10pt DejaVu Sans Mono;
set input-error-css=color:#f2777a;background-color:#002b36;font:10pt DejaVu Sans Mono;
set status-css=color:#839496;background-color:#002b36;font:10pt DejaVu Sans Mono;
set status-ssl-css=color:#839496;background-color:#002b36;font:10pt DejaVu Sans Mono;
set status-ssl-invalid-css=color:#f2777a;background-color:#002b36;font:10pt DejaVu Sans Mono;

